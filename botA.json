{
  "env_file": "acc1.env",          # 环境文件（sidecar 也会读取，以加载交易所密钥）
  "exchange": "lighter",           # 交易所

  "trading": {
    "ticker": "ETH",
    "direction": "buy",            # 初始方向（仅 grid 或未启用 ZigZag 时使用）
    "quantity": 0.005,             # 基础下单数量（手数/币数），用于网格或基础风控计算
    "min_order_size": 0.005,       # 最小下单量（按交易所/交易对填写）
    "max_fast_close_qty": 0.5,     # 单笔最大下单量；zigzag_timing 拆单、快反/快止损均用此上限
    "take_profit": 0.02,           # 止盈百分比，0.01 表示 0.01%
    "wait_time": 450,              # grid 下单间隔（秒）
    "max_orders": 40,              # grid 最大活跃挂单数
    "grid_step": -100,             # grid 步长百分比，负值表示不限制
    "stop_price": -1,              # 停止交易价格；-1 关闭
    "pause_price": -1,             # 暂停价格；-1 关闭
    "boost": false,                # 是否开启 boost 模式（仅 aster/backpack）
    "trading_mode": "zigzag_timing" # 交易模式：grid / zigzag_timing / hft
  },

  "risk": {
    "advanced": {
      "enable": true,                      # zigzag_timing 必开：冗余/动态SL/ZigZag
      "enable_stop_loss": true,            # zigzag_timing 必开：动态SL
      "risk_pct": 1.0,                     # 风险敞口百分比（按止损距离算仓位）
      "use_risk_exposure": true,           # true=按风险敞口算仓；false=按杠杆算仓
      "leverage": 1,                       # use_risk_exposure=false 时使用的杠杆倍数，equity*leverage/entry_price 得出目标仓位
      "risk_reward": -1,                   # 盈亏比，>0 按 RR 设置 TP，<0 关闭主动止盈
      "release_timeout_minutes": 0,        # grid/冗余释放用；zigzag_timing 不执行释放，可置 0
      "stop_new_orders_equity_threshold": 10, # 低于该 equity 停新并缓步平仓退出
      "zigzag": {
        "enable_zigzag": true,             # zigzag_timing 必开
        "enable_auto_reverse": false,      # zigzag_timing 内部已有破位逻辑，关闭原网格反手
        "auto_reverse_fast": false,        # zigzag_timing 不使用网格快反
        "zigzag_depth": 15,
        "zigzag_deviation": 5,             # ZigZag 偏离率
        "zigzag_backstep": 2,              # ZigZag backstep
        "zigzag_timeframe": "1m",          # ZigZag 聚合周期
        "pivot_poll_offset_sec": 5,        # 读取枢轴 JSON 的整点偏移秒数（0 表示整点，例：5 表示 00:05、15:05...）
        "break_buffer_ticks": 1,           # 突破确认高/低的缓冲（ticks）
        "use_break_candle_close_exit": true  # 开启后：平仓先追价到破位K线收盘，再按收盘价方向决定静态/追价
        "pivot_file": "zigzag_pivots.json" # TradingView ZigZag pivot 持久化路径
      }
    },
    "basic": {
      "enable": false,                       # 建议 zigzag_timing 关闭基础风险；如启用请确保不与进阶冲突
      "max_position_count": 30,              # 最大持仓 = quantity * max_position_count
      "basic_release_timeout_minutes": 10,   # 满仓持续 N 分钟后释放
      "webhook_sl": false,                   # TradingView buy/sell 基础风控是否触发止损
      "webhook_sl_fast": false,              # true=立即全平并撤单；false=停新+撤单，按节奏慢慢平
      "webhook_reverse": false               # 止损完成后是否自动反向开仓
    }
  },

  "notifications": {
    "enable_notifications": true,           # 是否开启通知
    "daily_pnl_report": true                # 是否发送每日 PnL（UTC 12:00）
  },

  "env": {
    "LOG_FILE_PREFIX": "botA_",             # 日志前缀
    "LOG_RETENTION_DAYS": "1",              # 日志保留天数
    "LIGHTER_REST_MIN_INTERVAL": "0.3",     # REST 最小间隔
    "LIGHTER_BACKOFF_START": "0.5",         # 退避起点
    "LIGHTER_BACKOFF_MAX": "8",             # 退避最大
    "ZIGZAG_PIVOT_FILE": "zigzag_pivots.json",
    "WEBHOOK_BASIC_DIRECTION_FILE": "webhook_basic_direction.json",
    "HFT_PIVOT_FILE": "hft_pivots.json"     # HFT 枢轴文件路径
  },

  "sidecar": {
    "shared_bbo_file": "/tmp/shared_bbo.json",  # sidecar 写入/读取的共享 BBO 文件
    "publish_interval_sec": 0.25,               # 写盘节奏（t3.micro 友好）
    "rest_interval_sec": 5,                     # WS 缺失/过期时 REST 兜底的最小间隔
    "shared_bbo_max_age_sec": 1.5,              # 共享 BBO 新鲜度判定
    "shared_bbo_cleanup_sec": 30,               # 清理共享文件中过期键（推荐 30s，t3.micro 盘占用低）
    "log_retention_days": 1                     # sidecar 日志保留天数（配合 nohup 输出文件定期清理）
  }
}
